<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceBox - Quick Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #1e293b;
            color: white;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background: #6366f1;
            color: white;
        }

        button:hover {
            background: #4f46e5;
        }

        select {
            padding: 10px;
            font-size: 16px;
            margin: 10px;
            border-radius: 8px;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #334155;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <h1>üéôÔ∏è VoiceBox Voice Test</h1>

    <div>
        <label>Language:</label>
        <select id="language">
            <option value="en-US">English</option>
            <option value="hi-IN">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
        </select>
    </div>

    <div>
        <label>üéôÔ∏è Voice:</label>
        <select id="voiceGender">
            <option value="female">üë© Female Voice</option>
            <option value="male">üë® Male Voice</option>
        </select>
    </div>

    <div>
        <button onclick="testVoice()">üîä Test Voice</button>
        <button onclick="location.href='index.html'">üì± Go to Main App</button>
    </div>

    <div class="result" id="result">
        Click "Test Voice" to check if voice is working...
    </div>

    <script>
        let currentLanguage = 'en-US';

        document.getElementById('language').addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            document.getElementById('result').innerHTML = `Language changed to: ${e.target.value}`;
        });

        function testVoice() {
            const lang = document.getElementById('language').value;
            const gender = document.getElementById('voiceGender').value;

            const text = lang === 'hi-IN' ?
                '‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Ø‡§π ‡§è‡§ï ‡§ü‡•á‡§∏‡•ç‡§ü ‡§π‡•à‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§ø‡§≤ ‡§™‡§æ‡§Ç‡§ö ‡§∏‡•å ‡§∞‡•Å‡§™‡§Ø‡•á ‡§π‡•à‡•§' :
                'Hello, this is a test. Your bill is five hundred rupees.';

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = 0.9;
            utterance.pitch = gender === 'female' ? 1.4 : 0.7;

            const voices = speechSynthesis.getVoices();
            const langCode = lang.split('-')[0];
            const langVoices = voices.filter(v => v.lang.startsWith(langCode));

            let selectedVoice = null;

            if (gender === 'female') {
                selectedVoice = langVoices.find(v =>
                    v.name.includes('Female') ||
                    v.name.includes('Zira') ||
                    v.name.includes('Heera')
                );

                if (!selectedVoice) {
                    selectedVoice = langVoices.find(v =>
                        !v.name.includes('Male') &&
                        !v.name.includes('David')
                    );
                }
            } else {
                selectedVoice = langVoices.find(v =>
                    v.name.includes('Male') ||
                    v.name.includes('David')
                );
            }

            if (!selectedVoice && langVoices.length > 0) {
                selectedVoice = langVoices[0];
            }

            if (selectedVoice) {
                utterance.voice = selectedVoice;
            }

            speechSynthesis.speak(utterance);

            document.getElementById('result').innerHTML = `
                <strong>‚úÖ Voice Test Started!</strong><br><br>
                Language: ${lang}<br>
                Gender: ${gender.toUpperCase()}<br>
                Pitch: ${utterance.pitch}<br>
                Voice: ${selectedVoice ? selectedVoice.name : 'Default'}<br>
                Text: "${text.substring(0, 50)}..."
            `;
        }

        // Load voices
        setTimeout(() => {
            const voices = speechSynthesis.getVoices();
            console.log('Available voices:', voices.length);
        }, 500);
    </script>
</body>

</html>